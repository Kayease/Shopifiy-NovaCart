{% liquid
  assign has_image = false
  if section.settings.image != blank
    assign has_image = true
  endif
%}

<section class="zest-collection" id="ZestCollection-{{ section.id }}"
  {% if has_image %}
    style="background-image: linear-gradient(rgba(26,26,26,0.6), rgba(26,26,26,0.6)), url('{{ section.settings.image | image_url: width: 1920 }}');"
  {% endif %}
>
  <div class="zest-collection__content">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'heading' %}
          <h2 {{ block.shopify_attributes }}>
            {{ block.settings.heading }}
          </h2>
        {% when 'text' %}
          <p {{ block.shopify_attributes }}>
            {{ block.settings.text }}
          </p>
        {% when 'button' %}
          <a 
            href="{{ block.settings.link }}" 
            class="zest-collection__cta"
            {{ block.shopify_attributes }}
          >
            {{ block.settings.label }}
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2"/>
            </svg>
          </a>
      {% endcase %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Zest Collection Banner",
  "tag": "section",
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        {
          "type": "richtext",
          "id": "heading",
          "label": "Heading",
          "default": "<h2>New Collection</h2>"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Discover our latest arrivals</p>"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Button label",
          "default": "Shop Collection"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Button link"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background image"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    }
  ],
  "presets": [
    {
      "name": "Zest Collection Banner",
      "blocks": [
        {
          "type": "heading",
          "settings": {
            "heading": "<h2>New Collection</h2>"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Discover our latest arrivals</p>"
          }
        },
        {
          "type": "button",
          "settings": {
            "label": "Shop Collection",
            "link": "shopify://collections/all"
          }
        }
      ]
    }
  ]
}
{% endschema %}